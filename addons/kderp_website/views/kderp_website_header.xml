<?xml version="1.0" encoding="utf-8"?>
<openerp>
	<data>
		<!-- Favicon for KDVN Site -->
		<template id="favicon" inherit_id="website.layout" name="KDVN favicon">
			<xpath expr="//head//link" position="after">
				<link rel="shortcut icon" href="/website/image/ir.attachment/1787_273fbc4/datas/favicon.ico" type="image/x-icon"></link>
			</xpath>
		</template>
		
		<!-- Customize the top menu -->
		<template id="kdvn_header" inherit_id="website.layout" name="KDVN Header">
			<xpath expr="//header//div[contains(@class, 'navbar')]" position="attributes">
				<attribute name="class">navbar navbar-custom navbar-static-top</attribute>
			</xpath>
		</template>
		
		<!-- Second submenu: 
		+ Adding flyout submenu, not recommend to use because of mobile interface
		+ Replace website.submenu template
		+ Using additional css
		-->
		<template id="website.submenu" name="KDVN Submenu" priority="5">
			<t t-if="submenu.name!='Home'">
			    <li t-if="not submenu.child_id" t-att-class="
			        ((submenu.url and submenu.url != '/' and request.httprequest.path.startswith(submenu.url)) or
			         request.httprequest.path == submenu.url) and 'active'
			        ">
			        <a t-att-href="(website.menu_id.child_id[0] == submenu) and '/' or submenu.url" t-ignore="true" t-att-target="'_blank' if submenu.new_window else None">
			            <span t-field="submenu.name"/>
			        </a>
			    </li>
	
			    <li t-if="submenu.child_id" t-attf-class="dropdown{{'' if (submenu.parent_id.name == 'Top Menu') else '-submenu'}} #{
			        ((submenu.url and submenu.url != '/' and [1 for submenu in submenu.child_id if request.httprequest.path.startswith(submenu.url)]) or
			         request.httprequest.path == submenu.url) and 'active'
			        }">
			        <a class="dropdown-toggle" data-toggle="dropdown" href="#">
			            <span t-field="submenu.name"/> <span t-att-class="(submenu.parent_id.name == 'Top Menu') and 'caret'" t-ignore="true"></span>
			        </a>
			        <ul class="dropdown-menu" role="menu">
			            <t t-foreach="submenu.child_id" t-as="submenu">
			                <t t-call="website.submenu"/>
			            </t>
			        </ul>
			    </li>
			</t>
		</template>
		
		<!-- Add divider to menu -->
		<template id="submenu_divider" inherit_id="website.submenu" name="Submenu divider">
		    <xpath expr="//li" position="before">
		    	<li t-if="(not submenu.child_id) and (submenu.divider)" class="divider"></li>
		    	<li t-if="submenu.divider and submenu.divider_text" class="dropdown-header"><span t-esc="submenu.divider_text"></span></li>
		    </xpath>
		</template>
		
		<!-- KDVN Logo: Trung id phai xoa view da tao ra trong View TODO -->
		<template id="website.layout_logo_show" inherit_id="website.layout" name="KDVN Logo" priority="10">
		    <xpath expr="//header//a[@class='navbar-brand']" position="replace">
		        <a href="/" class="navbar-brand logo">
		            <img src="/kderp_website/static/src/img/logo.png" t-att-alt="'Logo of %s' % res_company.name" t-att-title="res_company.name"/>
		        </a>
		    </xpath>		
		</template>
	</data>
</openerp>